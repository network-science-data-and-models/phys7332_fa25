
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Class 4: Distributions of Network Properties &amp; Centralities &#8212; PHYS 7332: Network Science Data &amp; Models (Fall 2025)</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/class_04/class_04_distributions';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Class 5: Scraping Web Data 1 - BeautifulSoup &amp; HTML" href="../class_05/class_05_scraping1.html" />
    <link rel="prev" title="Class 3: Introduction to Networkx 2 — Graph Properties &amp; Algorithms" href="../class_03/class_03_networkx2.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../README.html">
  
  
  
  
  
  
    <p class="title logo__title">PHYS 7332: Network Science Data & Models (Fall 2025)</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../README.html">
                    PHYS 7332: Network Science Data & Models – Fall 2025
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../class_00/class_00_github_computing_setup.html">Chapter 00: Introduction and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_01/class_01_python_refresher.html">Chapter 01: Python Refresher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_02/class_02_networkx1.html">Chapter 02: Introduction to Networkx 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_03/class_03_networkx2.html">Chapter 03: Introduction to Networkx 2</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Chapter 04: Distributions of Network Properties &amp; Centralities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_05/class_05_scraping1.html">Chapter 05: Scraping Web Data 1 - BeautifulSoup &amp; HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_06/class_06_data_science_and_sql.html">Chapter 06: Data Science 1 — Pandas, SQL, Regressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_07/class_07_creating_a_network_from_sql_tables.html">Chapter 07: Data Science 2 — SQL for Network Construction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_08/class_08_communities1.html">Chapter 08: Clustering &amp; Community Detection 1 — Traditional</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_09/class_09_communities2.html">Chapter 09: Clustering &amp; Community Detection 2 — Contemporary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_12/class_12_visualization_python.html">Chapter 12: Visualization 1 — Python and Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_13/class_13_visualization_python.html">Chapter 13: Visualization 2 — Advanced Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_14/class_14_graph_machine_learning_1.html">Chapter 14: Machine Learning 1 - General</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_15/class_15_graph_ml_2.html">Chapter 15: Machine Learning 2 - Graph Convolutional Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_16/class_16_dynamics1.html">Chapter 16: Dynamics on Networks 1 — Diffusion and Random Walks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_17/class_17_dynamics2.html">Chapter 17: Dynamics on Networks 2 — Compartmental Models</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/network-science-data-and-models/phys7332_fa25" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/network-science-data-and-models/phys7332_fa25/issues/new?title=Issue%20on%20page%20%2Fnotebooks/class_04/class_04_distributions.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/notebooks/class_04/class_04_distributions.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Class 4: Distributions of Network Properties & Centralities</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#degree-or-degree-centrality">Degree, or <em>Degree Centrality</em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#common-centrality-measures">Common Centrality Measures</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#case-study-closeness-centrality">Case Study: Closeness Centrality</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eigenvector-centrality">Eigenvector Centrality</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#network-null-models">Network Null Models</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#degree-preserving-randomization-and-non-degree-preserving">Degree-Preserving Randomization and Non-Degree-Preserving</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#full-randomization">Full Randomization</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#degree-preserving-randomization">Degree-Preserving Randomization</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-model">Configuration Model</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#supplemental-math">Supplemental Math</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#if-there-s-time">If there’s time…</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next-time">Next time…</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references-and-further-resources">References and further resources:</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="class-4-distributions-of-network-properties-centralities">
<h1>Class 4: Distributions of Network Properties &amp; Centralities<a class="headerlink" href="#class-4-distributions-of-network-properties-centralities" title="Link to this heading">#</a></h1>
<p>Goal of today’s class:</p>
<ol class="arabic simple">
<li><p>Define more centrality measures</p></li>
<li><p>Explore network <em>null</em> generative models</p></li>
<li><p>(Bonus) Introduce <em>correlations</em> among node properties</p></li>
</ol>
<p><em>Acknowledgement: Much of the material in this lesson is based on a previous course offered by Matteo Chinazzi and Qian Zhang.</em></p>
<hr class="docutils" />
<ol class="arabic simple">
<li><p>Come in. Sit down. Open Teams.</p></li>
<li><p>Find your notebook in your /Class_04/ folder.</p></li>
</ol>
<hr class="docutils" />
<p>(quick example of colors and hexcolors in matplotlib)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">networkx</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nx</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">rc</span>
<span class="n">rc</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">rc</span><span class="p">(</span><span class="s1">&#39;figure&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">rc</span><span class="p">(</span><span class="s1">&#39;savefig&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">rc</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">,</span> <span class="n">axisbelow</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#c5c03a&quot;</span><span class="p">,</span><span class="s2">&quot;#7275d7&quot;</span><span class="p">,</span><span class="s2">&quot;#8fb755&quot;</span><span class="p">,</span><span class="s2">&quot;#c361bd&quot;</span><span class="p">,</span><span class="s2">&quot;#5ec384&quot;</span><span class="p">,</span><span class="s2">&quot;#d3537a&quot;</span><span class="p">,</span><span class="s2">&quot;#3fe0d8&quot;</span><span class="p">,</span><span class="s2">&quot;#cb6b3b&quot;</span><span class="p">]</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span><span class="o">*</span><span class="mf">1.75</span><span class="p">,</span><span class="mf">1.5</span><span class="p">),</span><span class="n">dpi</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>

<span class="n">xvals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xvals</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">([</span><span class="n">xvals</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">xvals</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]],</span>
                     <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span><span class="n">xvals</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">xvals</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]]),</span><span class="mf">0.5</span><span class="p">,</span><span class="s1">&#39;Index = </span><span class="si">%i</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
            <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;.1&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="s1">&#39;x-large&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Example list of colors (variable name `cols`)&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="s1">&#39;xx-large&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/6a3bf8bcc4b1776205cdaa0e8eb97f636b2349cb5a49aa25302b92bf77510833.png" src="../../_images/6a3bf8bcc4b1776205cdaa0e8eb97f636b2349cb5a49aa25302b92bf77510833.png" />
</div>
</div>
<hr class="docutils" />
<section id="degree-or-degree-centrality">
<h2>Degree, or <em>Degree Centrality</em><a class="headerlink" href="#degree-or-degree-centrality" title="Link to this heading">#</a></h2>
<p>One way to think of a node’s influence (or importance, size, reach, etc.) is through its degree—how many neighbors it’s connected to. Surely that’s not all there is to it!</p>
<section id="common-centrality-measures">
<h3>Common Centrality Measures<a class="headerlink" href="#common-centrality-measures" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>Closeness Centrality</strong>:</p></li>
<li><p><strong>Betweenness Centrality</strong>: How often a node serves as a bridge along the shortest path between other pairs of nodes.</p></li>
<li><p><strong>Eigenvector Centrality</strong>: Considers not only a node’s degree but also its neighbors’ degree.</p></li>
<li><p><strong>PageRank</strong>: Variation of eigenvector centrality (originally used by Google), which includes random noise in the connectivitiy.</p></li>
<li><p><strong>Katz Centrality</strong>: Variation of eigenvector centrality, but includes a weight factor that decreases the contribution of longer walks, therby making closer nodes more influential.</p></li>
<li><p><strong>Clustering</strong> (kinda): Measures how close a node’s neighbors are to forming a complete clique (usually a clique of size 3, aka a triangle).</p></li>
<li><p><strong>Flow Betweenness</strong>: Computes the total flow of information passing through a node, assuming that “flows” can follow all paths in the network, and not just the shortest.</p></li>
</ul>
<section id="case-study-closeness-centrality">
<h4>Case Study: Closeness Centrality<a class="headerlink" href="#case-study-closeness-centrality" title="Link to this heading">#</a></h4>
<p><em>Closeness centrality</em> is an attempt to quantify how readily a given node can access all other nodes in the network, based on the idea that a node is more “central” if it is “closer” to all other nodes, where closeness is defined as the average length of the shortest paths from the node to all others in the network.</p>
<p>To calculate closeness centrality, you take the inverse of the sum of the shortest path distances from the node in question to all other nodes. Therefore, a node with high closeness centrality has shorter distances to other nodes, meaning it can spread information more efficiently or reach other nodes more quickly. To make this value standardized, we include an <span class="math notranslate nohighlight">\(N-1\)</span> in the numerator, so that the values don’t scale as the network’s size increases.</p>
<div class="math notranslate nohighlight">
\[
C(i) = \frac{N-1}{\sum_{i \neq j} d(i, j)}
\]</div>
<p>where <span class="math notranslate nohighlight">\(d(i,j)\)</span> is the shortest path distance between node <span class="math notranslate nohighlight">\(i\)</span> and <span class="math notranslate nohighlight">\(j\)</span>. Closeness centrality assumes the network is connected, and it can be modified to handle disconnected graphs by calculating the harmonic mean of distances instead, which is known as harmonic centrality.</p>
<p>Citation: Freeman, L.C. (1978). Centrality in Social Networks: Conceptual Clarification. <em>Social Networks</em>, vol. 1, no. 3, pp. 215-239. doi: <a class="reference external" href="https://doi.org/10.1016/0378-8733(78)90021-7">https://doi.org/10.1016/0378-8733(78)90021-7</a>.</p>
<hr class="docutils" />
<p>Let’s try it out!</p>
<p>As is often the case, <code class="docutils literal notranslate"><span class="pre">networkx</span></code> has a function to calculate this.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">karate_club_graph</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="o">.</span><span class="n">closeness_centrality</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{0: 0.5689655172413793,
 1: 0.4852941176470588,
 2: 0.559322033898305,
 3: 0.4647887323943662,
 4: 0.3793103448275862,
 5: 0.38372093023255816,
 6: 0.38372093023255816,
 7: 0.44,
 8: 0.515625,
 9: 0.4342105263157895,
 10: 0.3793103448275862,
 11: 0.36666666666666664,
 12: 0.3707865168539326,
 13: 0.515625,
 14: 0.3707865168539326,
 15: 0.3707865168539326,
 16: 0.28448275862068967,
 17: 0.375,
 18: 0.3707865168539326,
 19: 0.5,
 20: 0.3707865168539326,
 21: 0.375,
 22: 0.3707865168539326,
 23: 0.39285714285714285,
 24: 0.375,
 25: 0.375,
 26: 0.3626373626373626,
 27: 0.4583333333333333,
 28: 0.4520547945205479,
 29: 0.38372093023255816,
 30: 0.4583333333333333,
 31: 0.5409836065573771,
 32: 0.515625,
 33: 0.55}
</pre></div>
</div>
</div>
</div>
<p>Starting small, how do we calculate the closeness centrality of a single node if we were doing this from scratch?</p>
<p><strong>Hint:</strong> Here, we’re allowed to use built-in <code class="docutils literal notranslate"><span class="pre">networkx</span></code> functionalities, like <code class="docutils literal notranslate"><span class="pre">nx.shortest_path_length</span></code>, which takes a graph object and a given node as input, and returns a dictionary with the nodes as keys and values being the lengths of the shortest paths between the input node and all others.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node_i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">shortest_paths</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">shortest_path_length</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">node_i</span><span class="p">)</span>
<span class="n">shortest_paths</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{0: 0,
 1: 1,
 2: 1,
 3: 1,
 4: 1,
 5: 1,
 6: 1,
 7: 1,
 8: 1,
 10: 1,
 11: 1,
 12: 1,
 13: 1,
 17: 1,
 19: 1,
 21: 1,
 31: 1,
 9: 2,
 16: 2,
 24: 2,
 25: 2,
 27: 2,
 28: 2,
 30: 2,
 32: 2,
 33: 2,
 14: 3,
 15: 3,
 18: 3,
 20: 3,
 22: 3,
 23: 3,
 26: 3,
 29: 3}
</pre></div>
</div>
</div>
</div>
<p>(here, remember from class 03 where we did this manaully)</p>
<p><img alt="" src="../../_images/networkx_example_BFS.png" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sum the lengths of the shortest paths</span>
<span class="n">total_distance</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">shortest_paths</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">total_distance</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>58
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">N</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">()</span>

<span class="c1"># Closeness centrality calculation (ignoring disconnected components)</span>
<span class="k">if</span> <span class="n">total_distance</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">N</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">closeness_i</span> <span class="o">=</span> <span class="p">(</span><span class="n">N</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total_distance</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">closeness_i</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># In case the node is isolated</span>
    
<span class="n">closeness_i</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.5689655172413793
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<p>All together now.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">closeness_centrality_from_scratch</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>    
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the closeness centrality for each node in a graph from scratch.</span>

<span class="sd">    Closeness centrality is a measure of how close a node is to all other nodes</span>
<span class="sd">    in the network. It is calculated as the reciprocal of the sum of the shortest</span>
<span class="sd">    path distances from a node to all other nodes in the graph. This function </span>
<span class="sd">    computes the closeness centrality for all nodes in the graph `G` without </span>
<span class="sd">    using any external library functions for the centrality calculation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    G : networkx.Graph</span>
<span class="sd">        The input graph on which the closeness centrality is calculated. It can</span>
<span class="sd">        be any type of graph (undirected, directed, etc.) supported by NetworkX.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    centrality : dict</span>
<span class="sd">        A dictionary where the keys are nodes in the graph and the values are</span>
<span class="sd">        their corresponding closeness centrality scores. If a node is isolated,</span>
<span class="sd">        its centrality will be 0.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - For each node, this function computes the sum of shortest path lengths to </span>
<span class="sd">      all other reachable nodes in the graph using NetworkX&#39;s `shortest_path_length`.</span>
<span class="sd">    - Nodes that are disconnected from the rest of the graph will have a centrality </span>
<span class="sd">      of 0.0.</span>
<span class="sd">    - This function assumes that the graph is connected; however, it gracefully </span>
<span class="sd">      handles isolated nodes by assigning them a centrality score of 0.0.</span>

<span class="sd">    Time Complexity</span>
<span class="sd">    ---------------</span>
<span class="sd">    The time complexity is O(N * (V + E)), where N is the number of nodes, V is </span>
<span class="sd">    the number of vertices, and E is the number of edges, due to the use of </span>
<span class="sd">    shortest path calculations for each node.</span>

<span class="sd">    Citations</span>
<span class="sd">    ---------</span>
<span class="sd">    Bavelas, A. (1950). Communication patterns in task-oriented groups. The Journal </span>
<span class="sd">    of the Acoustical Society of America, 22(6), 725-730.</span>

<span class="sd">    Sabidussi, G. (1966). The centrality index of a graph. Psychometrika, 31(4), 581–603.</span>

<span class="sd">    Freeman, L. C. (1979). Centrality in social networks conceptual clarification. </span>
<span class="sd">    Social Networks, 1(3), 215–239.</span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    &gt;&gt;&gt; import networkx as nx</span>
<span class="sd">    &gt;&gt;&gt; G = nx.path_graph(4)</span>
<span class="sd">    &gt;&gt;&gt; closeness_centrality_from_scratch(G)</span>
<span class="sd">    {0: 0.6666666666666666, 1: 1.0, 2: 1.0, 3: 0.6666666666666666}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">centrality</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">N</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">()</span>  <span class="c1"># Total number of nodes in the graph</span>

    <span class="k">for</span> <span class="n">node_i</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
        <span class="c1"># Compute shortest paths from node_i to all other nodes</span>
        <span class="n">shortest_paths</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">shortest_path_length</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">node_i</span><span class="p">)</span>
        
        <span class="c1"># Sum the lengths of the shortest paths</span>
        <span class="n">total_distance</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">shortest_paths</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="c1"># Closeness centrality calculation (ignoring disconnected components)</span>
        <span class="k">if</span> <span class="n">total_distance</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">N</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">centrality</span><span class="p">[</span><span class="n">node_i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">N</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total_distance</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">centrality</span><span class="p">[</span><span class="n">node_i</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># In case the node is isolated</span>

    <span class="k">return</span> <span class="n">centrality</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">closeness_centrality_from_scratch</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{0: 0.5689655172413793,
 1: 0.4852941176470588,
 2: 0.559322033898305,
 3: 0.4647887323943662,
 4: 0.3793103448275862,
 5: 0.38372093023255816,
 6: 0.38372093023255816,
 7: 0.44,
 8: 0.515625,
 9: 0.4342105263157895,
 10: 0.3793103448275862,
 11: 0.36666666666666664,
 12: 0.3707865168539326,
 13: 0.515625,
 14: 0.3707865168539326,
 15: 0.3707865168539326,
 16: 0.28448275862068967,
 17: 0.375,
 18: 0.3707865168539326,
 19: 0.5,
 20: 0.3707865168539326,
 21: 0.375,
 22: 0.3707865168539326,
 23: 0.39285714285714285,
 24: 0.375,
 25: 0.375,
 26: 0.3626373626373626,
 27: 0.4583333333333333,
 28: 0.4520547945205479,
 29: 0.38372093023255816,
 30: 0.4583333333333333,
 31: 0.5409836065573771,
 32: 0.515625,
 33: 0.55}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="o">.</span><span class="n">closeness_centrality</span><span class="p">(</span><span class="n">G</span><span class="p">)</span><span class="o">==</span><span class="n">closeness_centrality_from_scratch</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="eigenvector-centrality">
<h3>Eigenvector Centrality<a class="headerlink" href="#eigenvector-centrality" title="Link to this heading">#</a></h3>
<p>The major contribution of eigenvector centrality was to define a node-level importance score to nodes that are connected to “important” other nodes (or incoming neighbors in directed graphs). In this way, eigenvector centrality generalizes degree centrality.</p>
<p>It accomplishes this task through an iterative process. Given a network with adjacency matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>:</p>
<ul class="simple">
<li><p>Initialize every node to have the same “importance” score, <span class="math notranslate nohighlight">\(\mathbf{x}(0) = [x_1(0),\cdots,x_n(0)]^T\)</span></p></li>
<li><p>Then, in the first iteration: <span class="math notranslate nohighlight">\(x_i(1) = \sum_j \mathbf{A}_{ij} x_i(0)\)</span>, or in matrix notation, <span class="math notranslate nohighlight">\(\mathbf{x}(1) = \mathbf{A} \mathbf{x}(0)\)</span>.</p></li>
</ul>
<ul class="simple">
<li><p>Then in the second iteration: <span class="math notranslate nohighlight">\(\mathbf{x}(2) = \mathbf{A} \mathbf{x}(1) = \mathbf{A}\mathbf{A} \mathbf{x}(0)\)</span>.</p></li>
<li><p>Finally, after <span class="math notranslate nohighlight">\(t\)</span> iterations: <span class="math notranslate nohighlight">\(\mathbf{x}(t) = \mathbf{A}^t \mathbf{x}(0)\)</span>. This becomes the eigenvector centrality of a node.</p></li>
</ul>
<p><strong>Deeper dive into the math behind eigenvector centrality.</strong></p>
<p>Let <span class="math notranslate nohighlight">\(\mathbf{x}(0)\)</span> be a linear combination of the eigenvectors <span class="math notranslate nohighlight">\(\mathbf{v}_i\)</span> of the adjancency matrix, such that <span class="math notranslate nohighlight">\(\mathbf{x}(0) = \sum_i c_i \mathbf{v}_i\)</span> and so <span class="math notranslate nohighlight">\(\mathbf{x}(t) = \mathbf{A}^t\sum_i c_i \mathbf{v}_i = \sum_i c_i \lambda_i^t \mathbf{v}_i\)</span>.</p>
<p>Let <span class="math notranslate nohighlight">\(\lambda_1\)</span> is the largest eigenvalue. In that case, <span class="math notranslate nohighlight">\(\sum_i c_i \lambda_i^t \mathbf(v)_i = \lambda_1^t \sum_i c_i \Big ( \frac{\lambda_i}{\lambda_1} \Big )^t \mathbf{v}_i\)</span>. If <span class="math notranslate nohighlight">\(i \neq 1\)</span>, <span class="math notranslate nohighlight">\(\lambda_i / \lambda_1 &lt; 1\)</span>, such that <span class="math notranslate nohighlight">\(t\rightarrow \infty\)</span>, <span class="math notranslate nohighlight">\(\mathbf{x}(t) \rightarrow c_1\lambda_1^t\mathbf{v}_1\)</span>.</p>
<p>Another way to think of this is that the <em>eigenvector centrality <span class="math notranslate nohighlight">\(\mathbf{x}\)</span> is the dominant eigenvector of the adjcency matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span></em>.</p>
<p><strong>Extra notes:</strong> The <em>Perron-Frobenius Theorem:</em> If <span class="math notranslate nohighlight">\(A\)</span> represents a <strong>strongly</strong> connected graph, there exists a positive real number (a Perron-Frobenius eigenvalue) <span class="math notranslate nohighlight">\(\lambda_{\max}\)</span>, such that any other eigenvalue of <span class="math notranslate nohighlight">\(A\)</span> is strictly smaller than <span class="math notranslate nohighlight">\(\lambda_{\max}\)</span>. There also exists a corresponding eigenvector <span class="math notranslate nohighlight">\(\mathbf{v}=(v_1,\cdots,v_n)^T\)</span> associated with <span class="math notranslate nohighlight">\(\lambda_{\max}\)</span> that <span class="math notranslate nohighlight">\(\forall v_{i} &gt; 0\)</span>.</p>
<hr class="docutils" />
<p>Citation: Bonacich, P. (1972) Factoring and Weighting Approaches to Status Scores and Clique Identification. <em>Journal of Mathematical Sociology</em>, 2, 113-120. doi: <a class="reference external" href="https://doi.org/10.1080/0022250X.1972.9989806">https://doi.org/10.1080/0022250X.1972.9989806</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">eigenvector_centrality_from_scratch</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">1e-08</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the eigenvector centrality for each node in a graph from scratch.</span>

<span class="sd">    Eigenvector centrality is a measure of a node&#39;s influence in a network based on </span>
<span class="sd">    the idea that connections to high-scoring nodes contribute more to the score </span>
<span class="sd">    of a node than equal connections to low-scoring nodes. This centrality measure </span>
<span class="sd">    assigns relative scores to all nodes in the network based on the principle that </span>
<span class="sd">    a node&#39;s centrality is determined by the centrality of its neighbors.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    G : networkx.Graph</span>
<span class="sd">        The input graph on which the eigenvector centrality is calculated. It can be</span>
<span class="sd">        any type of graph (undirected, directed, etc.) supported by NetworkX.</span>

<span class="sd">    max_iter : int, optional (default=100)</span>
<span class="sd">        Maximum number of iterations for the power iteration method used to compute</span>
<span class="sd">        the centrality values. Higher values may be required for large graphs.</span>

<span class="sd">    tol : float, optional (default=1e-06)</span>
<span class="sd">        Tolerance for the convergence of the eigenvector centrality values. The </span>
<span class="sd">        algorithm iterates until the change in centrality values is smaller than this</span>
<span class="sd">        threshold.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    centrality : dict</span>
<span class="sd">        A dictionary where the keys are nodes in the graph and the values are</span>
<span class="sd">        their corresponding eigenvector centrality scores.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - Eigenvector centrality was introduced by Bonacich (1972) as an extension </span>
<span class="sd">      of degree centrality, emphasizing the importance of connections to high-degree </span>
<span class="sd">      or highly influential nodes. </span>
<span class="sd">    - This algorithm computes eigenvector centrality using the power iteration </span>
<span class="sd">      method, which involves iteratively updating the centrality scores of each </span>
<span class="sd">      node based on the scores of their neighbors until convergence.</span>
<span class="sd">    - Eigenvector centrality works best in connected, undirected graphs; for </span>
<span class="sd">      directed or disconnected graphs, results may vary or be undefined.</span>
<span class="sd">    - The algorithm will stop either after `max_iter` iterations or when the </span>
<span class="sd">      centrality values converge to within the specified `tol`.</span>

<span class="sd">    Time Complexity</span>
<span class="sd">    ---------------</span>
<span class="sd">    The time complexity is O(V * E * I), where V is the number of vertices, </span>
<span class="sd">    E is the number of edges, and I is the number of iterations (limited by `max_iter`).</span>

<span class="sd">    Citations</span>
<span class="sd">    ---------</span>
<span class="sd">    Bonacich, P. (1972). Factoring and weighting approaches to status scores and </span>
<span class="sd">    clique identification. *Journal of Mathematical Sociology, 2*(1), 113-120.</span>

<span class="sd">    Newman, M. E. J. (2008). The mathematics of networks. *The New Palgrave </span>
<span class="sd">    Dictionary of Economics, 2*(1), 1-12.</span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    &gt;&gt;&gt; import networkx as nx</span>
<span class="sd">    &gt;&gt;&gt; G = nx.karate_club_graph()</span>
<span class="sd">    &gt;&gt;&gt; eigenvector_centrality_from_scratch(G)</span>
<span class="sd">    {0: 0.3730400736153818, 1: 0.2082196569730357, 2: 0.20624526357714606, ...}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="c1"># Initialize centrality dict with uniform values for all nodes</span>
    <span class="n">centrality</span> <span class="o">=</span> <span class="p">{</span><span class="n">node</span><span class="p">:</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">G</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">G</span><span class="p">}</span>
    <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>

    <span class="c1"># Power iteration method</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_iter</span><span class="p">):</span>
        <span class="n">prev_centrality</span> <span class="o">=</span> <span class="n">centrality</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">max_diff</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Track maximum change in centrality values</span>

        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">G</span><span class="p">:</span>
            <span class="c1"># Update centrality: sum of neighbors&#39; centralities</span>
            <span class="n">centrality</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">prev_centrality</span><span class="p">[</span><span class="n">neighbor</span><span class="p">]</span> <span class="k">for</span> <span class="n">neighbor</span> <span class="ow">in</span> <span class="n">G</span><span class="p">[</span><span class="n">node</span><span class="p">])</span>

        <span class="c1"># Normalize centrality values (divide by Euclidean norm)</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">value</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">centrality</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
        <span class="k">if</span> <span class="n">norm</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">centrality</span>  <span class="c1"># Handle disconnected graphs</span>
        <span class="n">centrality</span> <span class="o">=</span> <span class="p">{</span><span class="n">node</span><span class="p">:</span> <span class="n">value</span> <span class="o">/</span> <span class="n">norm</span> <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">centrality</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

        <span class="c1"># Check for convergence</span>
        <span class="n">max_diff</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">centrality</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">-</span> <span class="n">prev_centrality</span><span class="p">[</span><span class="n">node</span><span class="p">])</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">G</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">max_diff</span> <span class="o">&lt;</span> <span class="n">tol</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="k">return</span> <span class="n">centrality</span>
</pre></div>
</div>
</div>
</div>
<p><strong>What exactly is eigenvector centrality doing?</strong></p>
<p>The matrix multiplication is, in a sense, “reassigning” each node the sum of the values of its neighbor nodes. The operation can be thought of as iteratively “spreads out” the centrality among the nodes.</p>
<p>E.g. using the figures below:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\mathbf{A}^0\mathbf{x} = [0.53033009, 0.35355339,  0.53033009,  0.53033009,  0.1767767]^T\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\mathbf{A}^1\mathbf{x} = [0.53692484,  0.40269363,  0.53692484,  0.46980924,  0.2013468]^T\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\mathbf{A}^2\mathbf{x} = [0.53802265,  0.40558631,  0.53802265,  0.47318403,  0.1807204]^T\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\mathbf{A}^4\mathbf{x} = [0.53561243,  0.40808566,  0.53561243,  0.47731448,  0.1785375]^T\)</span></p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p><img alt="First" src="../../_images/eigenvector_centrality_illustration.001.jpeg" /></p></th>
<th class="head text-center"><p><img alt="Second" src="../../_images/eigenvector_centrality_illustration.002.jpeg" /></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>Eigenvector centrality 1</p></td>
<td class="text-center"><p>Eigenvector centrality 2</p></td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mf">3.5</span><span class="p">),</span><span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

<span class="n">col_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">Oranges</span><span class="p">,</span>
           <span class="mi">1</span><span class="p">:</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">Blues</span><span class="p">,</span>
           <span class="mi">2</span><span class="p">:</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">Greens</span><span class="p">}</span>
<span class="n">cent_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;degree centrality&#39;</span><span class="p">,</span>
               <span class="s1">&#39;eigenvector centrality&#39;</span><span class="p">,</span>
               <span class="s1">&#39;closeness centrality&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">centrality</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="n">nx</span><span class="o">.</span><span class="n">degree</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">eigenvector_centrality</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">closeness_centrality</span><span class="p">]):</span>
    <span class="n">cents</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">centrality</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
    <span class="n">cent_vals</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cents</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="n">cent_vals_minmax</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">cent_vals</span><span class="p">)</span><span class="o">-</span><span class="nb">min</span><span class="p">(</span><span class="n">cent_vals</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">cent_vals</span><span class="p">)</span><span class="o">-</span><span class="nb">min</span><span class="p">(</span><span class="n">cent_vals</span><span class="p">))</span>
    <span class="n">ncs</span> <span class="o">=</span> <span class="n">col_map</span><span class="p">[</span><span class="n">i</span><span class="p">](</span><span class="n">cent_vals_minmax</span><span class="p">)</span>
    <span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="n">ncs</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;.2&#39;</span><span class="p">,</span>
            <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="s1">&#39;x-small&#39;</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;.6&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Colored by</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="n">cent_labels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>


<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;images/pngs/centrality_compare_networkx.png&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">425</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;images/pdfs/centrality_compare_networkx.pdf&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/689188797bd3dad569e5423cc0a87d4d1063e4ece149470dbbe5eeb106d1b20f.png" src="../../_images/689188797bd3dad569e5423cc0a87d4d1063e4ece149470dbbe5eeb106d1b20f.png" />
</div>
</div>
<p><em><strong>We will not be going deep into detail of many other centrality measures, but the goal is that you have been exposed to a few of them and can understand the generic structure / motivation behind why they each exist. In Assignment 1, your task is to code one of these measures from scratch.</strong></em></p>
</section>
</section>
<hr class="docutils" />
<section id="network-null-models">
<h2>Network Null Models<a class="headerlink" href="#network-null-models" title="Link to this heading">#</a></h2>
<p>Network null models provide a baseline for comparison, allowing researchers to evaluate whether observed network properties arise due to specific network structures or simply by chance. By generating random networks that preserve certain characteristics (e.g., node degrees or edge distributions), null models help to identify significant patterns, test hypotheses, and detect structural features such as clustering or community structures that deviate from randomness. They are essential for understanding the underlying processes shaping a network and for ensuring that conclusions drawn from network analysis are meaningful.</p>
<p>Below we’ll walk through some examples!</p>
<section id="degree-preserving-randomization-and-non-degree-preserving">
<h3>Degree-Preserving Randomization and Non-Degree-Preserving<a class="headerlink" href="#degree-preserving-randomization-and-non-degree-preserving" title="Link to this heading">#</a></h3>
<section id="full-randomization">
<h4>Full Randomization<a class="headerlink" href="#full-randomization" title="Link to this heading">#</a></h4>
<p>This algorithm generates a random (Erdős–Rényi) network with the same number of nodes and links as the original network.</p>
<p>We select randomly a source node (S1) and two target nodes, where the first target (T1) is linked directly to the source node and the second target (T2) is not. We rewire the S1-T1 link, turning it into an S1-T2 link. As a result the degree of the target nodes T1 and T2 changes. We perform this procedure once for each link in the network.</p>
</section>
<section id="degree-preserving-randomization">
<h4>Degree-Preserving Randomization<a class="headerlink" href="#degree-preserving-randomization" title="Link to this heading">#</a></h4>
<p>This algorithm generates a network in which each node has exactly the same degree as in the original network, but the network’s wiring diagram has been randomized. We select two source (S1, S2) and two target nodes (T1, T2), such that initially there is a link between S1 and T1, and a link between S2 and T2. We then swap the two links, creating an S1-T2 and an S2-T1 link. The swap leaves the degree of each node unchanged. This procedure is repeated until we rewire each link at least once.</p>
<p>(excerpt from Chapter 4 of <a class="reference external" href="http://barabasi.com/networksciencebook/">http://barabasi.com/networksciencebook/</a>)</p>
<p><img alt="" src="../../_images/figure-4-17.png" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">networkx</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nx</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">karate_club_graph</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fully randomize your nodes and links:</span>
<span class="n">N</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">()</span>
<span class="n">M</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">()</span>

<span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
<span class="n">G_randomized</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">gnm_random_graph</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="n">M</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mf">3.5</span><span class="p">),</span><span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;.2&#39;</span><span class="p">,</span>
        <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="s1">&#39;x-small&#39;</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;.6&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Original Graph&quot;</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G_randomized</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;.2&#39;</span><span class="p">,</span>
        <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="s1">&#39;x-small&#39;</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;.6&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;&quot;Full Randomization&quot;&#39;</span><span class="p">)</span>


<span class="c1"># plt.savefig(&#39;images/pngs/null_models_fullrandomize.png&#39;, dpi=425, bbox_inches=&#39;tight&#39;)</span>
<span class="c1"># plt.savefig(&#39;images/pdfs/null_models_fullrandomize.pdf&#39;, bbox_inches=&#39;tight&#39;)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/e00c8ff3f56f1c0fc4842a5084ea43c354d4f94937256307a9069d4c30ca2aed.png" src="../../_images/e00c8ff3f56f1c0fc4842a5084ea43c354d4f94937256307a9069d4c30ca2aed.png" />
</div>
</div>
<p>What about degree-preserving randomization?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">degree_preserving_randomization</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Perform degree-preserving randomization on a graph.</span>

<span class="sd">    Degree-preserving randomization, also known as edge swapping or rewiring, </span>
<span class="sd">    is a method for creating randomized versions of a graph while preserving </span>
<span class="sd">    the degree distribution of each node. This is achieved by repeatedly </span>
<span class="sd">    swapping pairs of edges in the graph, ensuring that the degree (number of </span>
<span class="sd">    edges connected) of each node remains unchanged. The result is a graph </span>
<span class="sd">    with the same degree distribution but a randomized edge structure, which </span>
<span class="sd">    can be used as a null model to compare with the original network.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    G : networkx.Graph</span>
<span class="sd">        The input graph to be randomized. The graph can be directed or </span>
<span class="sd">        undirected, but it must be simple (i.e., no self-loops or parallel edges).</span>

<span class="sd">    n_iter : int, optional (default=1000)</span>
<span class="sd">        The number of edge swap iterations to perform. A higher number of </span>
<span class="sd">        iterations leads to more randomization, but the degree distribution </span>
<span class="sd">        remains preserved. Typically, the number of iterations should be </span>
<span class="sd">        proportional to the number of edges in the graph for sufficient </span>
<span class="sd">        randomization.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    G_random : networkx.Graph</span>
<span class="sd">        A randomized graph with the same degree distribution as the original </span>
<span class="sd">        graph `G`, but with a shuffled edge structure.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - This method works by selecting two edges at random, say (u, v) and (x, y), </span>
<span class="sd">      and attempting to swap them to (u, y) and (x, v) (or (u, x) and (v, y)), </span>
<span class="sd">      ensuring that no self-loops or parallel edges are created in the process.</span>
<span class="sd">    - Degree-preserving randomization is particularly useful for creating null </span>
<span class="sd">      models in network analysis, as it allows for the investigation of whether </span>
<span class="sd">      specific network properties (e.g., clustering, path lengths) are a result </span>
<span class="sd">      of the network&#39;s structure or just its degree distribution.</span>
<span class="sd">    - The effectiveness of randomization depends on the number of iterations </span>
<span class="sd">      (`n_iter`). As a rule of thumb, using about 10 times the number of edges </span>
<span class="sd">      in the graph for `n_iter` often provides sufficient randomization.</span>
<span class="sd">    </span>
<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    &gt;&gt;&gt; import networkx as nx</span>
<span class="sd">    &gt;&gt;&gt; G = nx.erdos_renyi_graph(10, 0.5)</span>
<span class="sd">    &gt;&gt;&gt; G_random = degree_preserving_randomization(G, n_iter=100)</span>
<span class="sd">    </span>
<span class="sd">    Citations</span>
<span class="sd">    ---------</span>
<span class="sd">    Milo, R., Shen-Orr, S., Itzkovitz, S., Kashtan, N., Chklovskii, D., &amp; Alon, U. (2002). </span>
<span class="sd">    Network motifs: simple building blocks of complex networks. *Science*, 298(5594), 824-827.</span>
<span class="sd">    </span>
<span class="sd">    Maslov, S., &amp; Sneppen, K. (2002). Specificity and stability in topology of protein networks. </span>
<span class="sd">    *Science*, 296(5569), 910-913.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">G_random</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">G_random</span><span class="o">.</span><span class="n">edges</span><span class="p">())</span>
    <span class="n">num_edges</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_iter</span><span class="p">):</span>
        <span class="c1"># Select two random edges (u, v) and (x, y)</span>
        <span class="n">edge1_id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">edges</span><span class="p">))))</span>
        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">edges</span><span class="p">[</span><span class="n">edge1_id</span><span class="p">]</span>
        <span class="n">edge2_id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">edges</span><span class="p">))))</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">edges</span><span class="p">[</span><span class="n">edge2_id</span><span class="p">]</span>

        <span class="c1"># Avoid selecting the same edge pair or creating self-loops</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">({</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">})</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="c1"># Swap the edges with some probability</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                <span class="c1"># Swap (u, v) with (u, y) and (x, v)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">G_random</span><span class="o">.</span><span class="n">has_edge</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">or</span> <span class="n">G_random</span><span class="o">.</span><span class="n">has_edge</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">)):</span>
                    <span class="n">G_random</span><span class="o">.</span><span class="n">remove_edge</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
                    <span class="n">G_random</span><span class="o">.</span><span class="n">remove_edge</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    <span class="n">G_random</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    <span class="n">G_random</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Swap (u, v) with (u, x) and (v, y)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">G_random</span><span class="o">.</span><span class="n">has_edge</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="ow">or</span> <span class="n">G_random</span><span class="o">.</span><span class="n">has_edge</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">y</span><span class="p">)):</span>
                    <span class="n">G_random</span><span class="o">.</span><span class="n">remove_edge</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
                    <span class="n">G_random</span><span class="o">.</span><span class="n">remove_edge</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    <span class="n">G_random</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
                    <span class="n">G_random</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="c1"># Update edge list after changes</span>
        <span class="n">edges</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">G_random</span><span class="o">.</span><span class="n">edges</span><span class="p">())</span>


    <span class="k">return</span> <span class="n">G_random</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fully randomize your nodes and links:</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">G_randomized</span> <span class="o">=</span> <span class="n">degree_preserving_randomization</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mf">3.5</span><span class="p">),</span><span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;.2&#39;</span><span class="p">,</span>
        <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="s1">&#39;x-small&#39;</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;.6&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Original Graph&quot;</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G_randomized</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;.2&#39;</span><span class="p">,</span>
        <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="s1">&#39;x-small&#39;</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;.6&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;&quot;Degree-Preserving Randomization&quot;&#39;</span><span class="p">)</span>


<span class="c1"># plt.savefig(&#39;images/pngs/null_models_degreepreservingrandomize.png&#39;, dpi=425, bbox_inches=&#39;tight&#39;)</span>
<span class="c1"># plt.savefig(&#39;images/pdfs/null_models_degreepreservingrandomize.pdf&#39;, bbox_inches=&#39;tight&#39;)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/b6ecddb68dcdad646882294a5b9ddb275c8bcd154f878e6b495bdfe4bc297832.png" src="../../_images/b6ecddb68dcdad646882294a5b9ddb275c8bcd154f878e6b495bdfe4bc297832.png" />
</div>
</div>
</section>
</section>
<section id="configuration-model">
<h3>Configuration Model<a class="headerlink" href="#configuration-model" title="Link to this heading">#</a></h3>
<p>In the previous two network null models, we assumed that we had access to the graph itself. How would we sample random graphs from <em>only the degree sequence</em>?</p>
<p>The <em><strong>configuration model</strong></em> is a method for generating random networks while preserving the degree distribution of nodes. It works by assigning “stubs” or “half-edges” to each node based on its degree and then randomly pairing these stubs to create edges. This model is often used as a null model in network analysis to study how network properties, such as clustering or motifs, arise due to the degree sequence rather than the specific arrangement of edges.</p>
<p>The configuration model can result in networks with self-loops and parallel edges, but these can be removed if needed to produce a simple graph. By comparing a real network to its randomized configuration model counterpart, we can gain insights into which features of the network structure are non-random and statistically significant.</p>
<p>(excerpt from Chapter 4 of <a class="reference external" href="http://barabasi.com/networksciencebook/">http://barabasi.com/networksciencebook/</a>)</p>
<p><img alt="" src="../../_images/figure-4-15.png" /></p>
<p>The configuration model, illustrated in the graphic above, builds a network with a pre-defined degree sequence.</p>
<p>In the network generated by the model, each node has a pre-defined degree <span class="math notranslate nohighlight">\(k_i\)</span>, but otherwise the network is wired randomly. Consequently the network is often called a random network with a pre-defined degree sequence. By repeatedly applying this procedure to the same degree sequence we can generate different networks with the same <span class="math notranslate nohighlight">\(p_k\)</span> (Image 4.15b-d). There are a couple of caveats to consider:</p>
<ol class="arabic simple">
<li><p>The probability to have a link between nodes of degree <span class="math notranslate nohighlight">\(k_i\)</span> and <span class="math notranslate nohighlight">\(k_j\)</span> is: <span class="math notranslate nohighlight">\(p_{ij}=\frac{k_i k_j}{2L−1}\)</span>. Indeed, a stub starting from node i can connect to <span class="math notranslate nohighlight">\(2L - 1\)</span> other stubs. Of these, <span class="math notranslate nohighlight">\(k_j\)</span> are attached to node <span class="math notranslate nohighlight">\(j\)</span>. So the probability that a particular stub is connected to a stub of node <span class="math notranslate nohighlight">\(j\)</span> is <span class="math notranslate nohighlight">\(\frac{k_j}{2L - 1}\)</span>. As node <span class="math notranslate nohighlight">\(i\)</span> has <span class="math notranslate nohighlight">\(k_i\)</span> stubs, it has <span class="math notranslate nohighlight">\(k_j\)</span> attempts to link to <span class="math notranslate nohighlight">\(j\)</span>, resulting in (4.24).</p></li>
<li><p>The obtained network contains <strong>self-loops</strong> and <strong>multi-edges</strong>, nothing in the algorithm forbids a node from connecting to itself, or to generate multiple links between two nodes. We can choose to reject stub pairs that lead to these, but if we do so, we may not be able to complete the network. Rejecting self-loops or multi-links also means that not all possible matchings appear with equal probability.</p></li>
<li><p>The configuration model is frequently used in calculations, as in the equation above, and its inherently random character helps us analytically calculate numerous network measures.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">networkx</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nx</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">Counter</span>

<span class="k">def</span><span class="w"> </span><span class="nf">configuration_model_from_degree_sequence</span><span class="p">(</span><span class="n">degree_sequence</span><span class="p">,</span> <span class="n">return_simple</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a random graph using the configuration model from a given degree sequence</span>
<span class="sd">    without using the NetworkX built-in function.</span>

<span class="sd">    The configuration model generates a random graph that preserves the degree </span>
<span class="sd">    sequence of nodes by assigning &quot;stubs&quot; or &quot;half-edges&quot; to each node and </span>
<span class="sd">    randomly pairing these stubs to form edges. This process can result in </span>
<span class="sd">    graphs with self-loops and parallel edges, which can be removed if needed.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    degree_sequence : list of int</span>
<span class="sd">        A list representing the degree of each node in the graph. The sum of </span>
<span class="sd">        the degrees in this sequence must be even for the configuration model </span>
<span class="sd">        to create a valid graph.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    G : networkx.MultiGraph</span>
<span class="sd">        A multigraph generated from the given degree sequence. The graph may </span>
<span class="sd">        contain self-loops and parallel edges, which are allowed in the </span>
<span class="sd">        configuration model.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - This method works by assigning &quot;stubs&quot; or &quot;half-edges&quot; to nodes based on </span>
<span class="sd">      their degree and then randomly pairing them to form edges. The resulting </span>
<span class="sd">      graph can have self-loops and parallel edges.</span>
<span class="sd">    - Self-loops and parallel edges can be removed post-generation if a simple </span>
<span class="sd">      graph is required using NetworkX&#39;s `nx.Graph(G)`.</span>
<span class="sd">    - The degree sequence must have an even sum for a valid graph construction. </span>
<span class="sd">      If the sum of the degrees is odd, no graph can be constructed.</span>

<span class="sd">    Time Complexity</span>
<span class="sd">    ---------------</span>
<span class="sd">    The time complexity is O(E), where E is the number of edges in the graph.</span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    &gt;&gt;&gt; degree_sequence = [3, 3, 2, 2, 1, 1]</span>
<span class="sd">    &gt;&gt;&gt; G = configuration_model_from_degree_sequence(degree_sequence)</span>
<span class="sd">    &gt;&gt;&gt; nx.is_graphical(degree_sequence)</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Check if the degree sequence is valid (sum of degrees must be even)</span>
    <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">degree_sequence</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The sum of the degree sequence must be even.&quot;</span><span class="p">)</span>

    <span class="c1"># Create stubs list: node i appears degree_sequence[i] times</span>
    <span class="n">stubs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">degree</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">degree_sequence</span><span class="p">):</span>
        <span class="n">stubs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">node</span><span class="p">]</span> <span class="o">*</span> <span class="n">degree</span><span class="p">)</span>

    <span class="c1"># Shuffle stubs to randomize the pairing process</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">stubs</span><span class="p">)</span>

    <span class="c1"># Initialize an empty multigraph</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">MultiGraph</span><span class="p">()</span>

    <span class="c1"># Add nodes to the graph</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">degree_sequence</span><span class="p">)))</span>

    <span class="c1"># Pair stubs to create edges</span>
    <span class="k">while</span> <span class="n">stubs</span><span class="p">:</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">stubs</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">stubs</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

        <span class="c1"># Add the edge to the graph</span>
        <span class="n">G</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">return_simple</span><span class="p">:</span>
        <span class="c1"># Convert the multigraph to a simple graph (remove parallel edges and self-loops)</span>
        <span class="n">G_simple</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>  <span class="c1"># This removes parallel edges and self-loops by default</span>

        <span class="k">return</span> <span class="n">G_simple</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">G</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fully randomize your nodes and links:</span>

<span class="n">G_randomized</span> <span class="o">=</span> <span class="n">configuration_model_from_degree_sequence</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">degree</span><span class="p">())</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span><span class="n">return_simple</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mf">3.5</span><span class="p">),</span><span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;.2&#39;</span><span class="p">,</span>
        <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="s1">&#39;x-small&#39;</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;.6&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Original Graph&quot;</span><span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G_randomized</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;.2&#39;</span><span class="p">,</span>
        <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="s1">&#39;x-small&#39;</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;.6&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;&quot;Configuration Model&quot;&#39;</span><span class="p">)</span>


<span class="c1"># plt.savefig(&#39;images/pngs/null_models_configurationmodel.png&#39;, dpi=425, bbox_inches=&#39;tight&#39;)</span>
<span class="c1"># plt.savefig(&#39;images/pdfs/null_models_configurationmodel.pdf&#39;, bbox_inches=&#39;tight&#39;)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/749e42aa0c731a4b4313fa142651c99b80b47bbc6ae9c66764a3c3c2c3258dd8.png" src="../../_images/749e42aa0c731a4b4313fa142651c99b80b47bbc6ae9c66764a3c3c2c3258dd8.png" />
</div>
</div>
<hr class="docutils" />
<section id="supplemental-math">
<h4>Supplemental Math<a class="headerlink" href="#supplemental-math" title="Link to this heading">#</a></h4>
<p>Notice that the inherent randomness of the networks generated using the configuration model allows the analytical calculation also of properties such as the clustering coefficient and the average shortest path in the general case of random uncorrelated graphs with given degree distribution <span class="math notranslate nohighlight">\(P(k)\)</span>.</p>
<p>For instance, the general expression for the <strong>average clustering coefficient</strong> reads as:</p>
<div class="math notranslate nohighlight">
\[ \left\langle C \right\rangle = \frac{1}{N} \frac{\left(\left\langle k^2 \right\rangle - \left\langle k \right\rangle\right)^2}{\left\langle k \right\rangle^3}.\]</div>
<p>This implies that the clustering properties have an intrinsic dependence on the degree distribution moments. In the limit of infinite size <span class="math notranslate nohighlight">\(N \rightarrow  \infty\)</span>, the clustering coefficient is null as expected in a completely random graph. However, in finite size networks with large fluctuations of the degree distribution, the clustering coefficient could have much larger values than in the case of the Poissonian Erdős–Rényi graph because of the large values attained by <span class="math notranslate nohighlight">\(\left\langle k^2\right\rangle\)</span>.</p>
<p>A generalization of the formula for the scaling of the <strong>average shortest path</strong> of the graph can similarly be obtained and reads:</p>
<div class="math notranslate nohighlight">
\[ \left\langle l \right\rangle \simeq 1 + \frac{\log\left(N / \left\langle k \right\rangle\right)}{\log\left(\left(\left\langle k^2 \right\rangle - \left\langle k \right\rangle\right)/\left\langle k \right\rangle\right)}.\]</div>
<hr class="docutils" />
<!-- # __PROBLEM__

# Eigenvector centrality works fine for undirected networks. How about directed one?

# Think about this small directed network. What are their eigenvalue centralities?

# <img src="images/eigenvector_centrality_illustration.003.jpeg", style="width:600px; float:center;">

# __In general Eigenvector centrality has a major problem:__

# * creates issues outside strongly connected components

# * diffusion of importance 0 for nodes with in-degree 0


# ### Katz Centrality (1953)

# * a variation of Eigenvector centrality

#     * assign a small amount of centrality to each node initially

#     * so we define: $$x_i = \alpha \sum_j \mathbf{A}_{ij} x_j + \beta, \alpha>0, \beta>0$$

#     * in matrix notation: $$\mathbf{x} = \alpha \mathbf{A}\mathbf{x} + \beta\mathbf{1}$$

#     * thus $$\mathbf{x} = \beta(\mathbf{I} - \alpha \mathbf{A})^{-1}\mathbf{1}$$

# * The role of free parameter $\alpha$

#     * when $\alpha\rightarrow 0$, $$\mathbf{x}=\beta\mathrm{1}$$
    
#     * when $\det(\mathbf{I} - \alpha \mathbf{A}) = 0$, $$\mathbf{x} = \infty$$
  
#     * rewrite $\det(\mathbf{I} - \alpha \mathbf{A}) = 0$ as $$\det(\mathbf{A}-\alpha^{-1}\mathbf{I}) = 0$$
    
#     * simply we have the eigenvalue $\lambda = \frac{1}{\alpha}$
    
#     * thus we have to choose $$\frac{1}{\alpha} > \lambda_1 \quad \mathrm{OR} \quad  \alpha < \frac{1}{\lambda_1}$$ --></section>
<section id="if-there-s-time">
<h4>If there’s time…<a class="headerlink" href="#if-there-s-time" title="Link to this heading">#</a></h4>
<p>Pick a network from <a class="reference external" href="http://networkrepository.com">networkrepository.com</a> and randomize it’s structure. Compute several graph properties and describe how they change after the network has been randomized.</p>
<p><em>Question to think about on your commute home:</em> Are there more network null models in the literature or more centrality measures?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="next-time">
<h2>Next time…<a class="headerlink" href="#next-time" title="Link to this heading">#</a></h2>
<p>Scraping Web Data 1 — BeautifulSoup, HTML, Pandas! <code class="docutils literal notranslate"><span class="pre">class_05_scraping1.ipynb</span></code></p>
</section>
<hr class="docutils" />
<section id="references-and-further-resources">
<h2>References and further resources:<a class="headerlink" href="#references-and-further-resources" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Class Webpages</p>
<ul class="simple">
<li><p>Jupyter Book: <a class="reference external" href="https://network-science-data-and-models.github.io/phys7332_fa25/README.html">https://network-science-data-and-models.github.io/phys7332_fa25/README.html</a></p></li>
<li><p>Github: <a class="github reference external" href="https://github.com/network-science-data-and-models/phys7332_fa25/">network-science-data-and-models/phys7332_fa25</a></p></li>
<li><p>Syllabus and course details: <a class="reference external" href="https://brennanklein.com/phys7332-fall25">https://brennanklein.com/phys7332-fall25</a></p></li>
</ul>
</li>
<li><p>Freeman, L.C. (1978). Centrality in Social Networks: Conceptual Clarification. <em>Social Networks</em>, vol. 1, no. 3, pp. 215-239. doi: <a class="reference external" href="https://doi.org/10.1016/0378-8733(78)90021-7">https://doi.org/10.1016/0378-8733(78)90021-7</a>.</p></li>
<li><p>Bonacich, P. (1972) Factoring and Weighting Approaches to Status Scores and Clique Identification. <em>Journal of Mathematical Sociology</em>, 2, 113-120. doi: <a class="reference external" href="https://doi.org/10.1080/0022250X.1972.9989806">https://doi.org/10.1080/0022250X.1972.9989806</a>.</p></li>
<li><p>Maslov, S. &amp; Sneppen, K. (2002). Specificity and stability in topology of protein networks. <em>Science</em>, 296:910-913. doi: <a class="reference external" href="https://doi.org/10.1126/science.1065103">https://doi.org/10.1126/science.1065103</a>.</p></li>
<li><p>Oldham S, Fulcher B, Parkes L, Arnatkevic̆iūtė A, Suo C, Fornito A (2019) Consistency and differences between centrality measures across distinct classes of networks. <em>PLoS ONE</em> 14(7): e0220061. <a class="reference external" href="https://doi.org/10.1371/journal.pone.0220061">https://doi.org/10.1371/journal.pone.0220061</a></p></li>
<li><p>Newman (2018). Networks: An Introduction. Oxford University, Oxford.</p></li>
</ol>
<hr class="docutils" />
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks/class_04"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../class_03/class_03_networkx2.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Class 3: Introduction to Networkx 2 — Graph Properties &amp; Algorithms</p>
      </div>
    </a>
    <a class="right-next"
       href="../class_05/class_05_scraping1.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Class 5: Scraping Web Data 1 - BeautifulSoup &amp; HTML</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#degree-or-degree-centrality">Degree, or <em>Degree Centrality</em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#common-centrality-measures">Common Centrality Measures</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#case-study-closeness-centrality">Case Study: Closeness Centrality</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eigenvector-centrality">Eigenvector Centrality</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#network-null-models">Network Null Models</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#degree-preserving-randomization-and-non-degree-preserving">Degree-Preserving Randomization and Non-Degree-Preserving</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#full-randomization">Full Randomization</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#degree-preserving-randomization">Degree-Preserving Randomization</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-model">Configuration Model</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#supplemental-math">Supplemental Math</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#if-there-s-time">If there’s time…</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next-time">Next time…</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references-and-further-resources">References and further resources:</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Brennan Klein
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>